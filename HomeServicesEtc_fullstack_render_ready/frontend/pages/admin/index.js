import useSWR from 'swr';
export default function Admin(){ async function fetchQueue(){ const res = await fetch('/api/providers/admin/queue'); return res.json(); } const {data,mutate} = useSWR('/api/providers/admin/queue', fetchQueue); async function verify(id,action){ await fetch('/api/providers/admin/'+id+'/verify',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({action})}); mutate(); } return (<div style={{padding:20}}><h2>Admin Verification Queue</h2>{data ? data.map(p=>(<div key={p._id} style={{border:'1px solid #ddd',padding:8,margin:8}}><strong>{p.userId?.name} ({p.userId?.email})</strong><div>Business: {p.businessName}</div><div>Docs: {JSON.stringify(p.documents)}</div><button onClick={()=>verify(p._id,'approve')}>Approve</button><button onClick={()=>verify(p._id,'reject')}>Reject</button></div>)) : 'Loading...'}</div>); }
